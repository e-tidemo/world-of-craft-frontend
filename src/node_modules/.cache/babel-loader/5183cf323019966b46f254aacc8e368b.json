{"ast":null,"code":"var _jsxFileName = \"/Users/elvir/frontend/world-of-craft/src/pages/posts/Post.js\";\nimport React from 'react';\nimport styles from '../../styles/Post.module.css';\nimport { useCurrentUser } from '../../contexts/CurrentUserContext';\nimport { Card, OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport { Row, Col, Image } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport Avatar from \"../../components/Avatar\";\nimport { axiosRes } from '../../api/axiosDefault';\n/*import { axiosRes } from \"../../api/axiosDefault\";*/\n\nconst Post = props => {\n  const {\n    id,\n    owner,\n    profile_id,\n    profile_image,\n    comments_count,\n    likes_count,\n    like_id,\n    title,\n    content,\n    image,\n    updated_at,\n    postPage,\n    setPosts\n  } = props;\n  const currentUser = useCurrentUser();\n  const is_owner = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.username) === owner;\n  const handleLike = async () => {\n    try {\n      const {\n        data\n      } = await axiosRes.post(\"/likes/\", {\n        post: id\n      });\n      setPosts(prevPosts => ({\n        ...prevPosts,\n        results: prevPosts.results.map(post => {\n          return post.id === id ? {\n            ...post,\n            likes_count: post.likes_count + 1,\n            like_id: data.id\n          } : post;\n        })\n      }));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Card, {\n    className: styles.Post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"align-items-center jsutify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/profiles/${profile_id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: profile_image,\n    height: 55,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 25\n    }\n  }), owner)), /*#__PURE__*/React.createElement(Col, {\n    xs: 9,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, updated_at), is_owner && postPage && \"...\")))), /*#__PURE__*/React.createElement(Link, {\n    to: `/posts/${id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card.Img, {\n    src: image,\n    alt: title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, title && /*#__PURE__*/React.createElement(Card.Title, {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 23\n    }\n  }, title), content && /*#__PURE__*/React.createElement(Card.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  }, content), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.PostBar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, is_owner ? /*#__PURE__*/React.createElement(OverlayTrigger, {\n    placement: \"top\",\n    overlay: /*#__PURE__*/React.createElement(Tooltip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 62\n      }\n    }, \"You can't like your own post!\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-heart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }\n  })) : like_id ? /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: `fas fa-heart ${styles.Heart}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  })) : currentUser ? /*#__PURE__*/React.createElement(\"span\", {\n    onClick: handleLike,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: `far fa-heart ${styles.HeartOutline}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  })) : /*#__PURE__*/React.createElement(OverlayTrigger, {\n    placement: \"top\",\n    overlay: /*#__PURE__*/React.createElement(Tooltip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 62\n      }\n    }, \"Log in to like posts!\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-heart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  })), likes_count, /*#__PURE__*/React.createElement(Link, {\n    to: `/posts/${id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  })), comments_count)));\n};\nexport default Post;","map":{"version":3,"names":["React","styles","useCurrentUser","Card","OverlayTrigger","Tooltip","Row","Col","Image","Link","Avatar","axiosRes","Post","props","id","owner","profile_id","profile_image","comments_count","likes_count","like_id","title","content","image","updated_at","postPage","setPosts","currentUser","is_owner","username","handleLike","data","post","prevPosts","results","map","err","console","log","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Body","xs","to","src","height","Img","alt","Title","Text","PostBar","placement","overlay","onClick","Heart","HeartOutline"],"sources":["/Users/elvir/frontend/world-of-craft/src/pages/posts/Post.js"],"sourcesContent":["import React from 'react';\nimport styles from '../../styles/Post.module.css';\nimport { useCurrentUser } from '../../contexts/CurrentUserContext';\nimport { Card, OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport { Row, Col, Image } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport Avatar from \"../../components/Avatar\";\nimport { axiosRes } from '../../api/axiosDefault';\n/*import { axiosRes } from \"../../api/axiosDefault\";*/\n\nconst Post = (props) => {\n    const {\n        id,\n        owner,\n        profile_id,\n        profile_image,\n        comments_count,\n        likes_count,\n        like_id,\n        title,\n        content,\n        image,\n        updated_at,\n        postPage,\n        setPosts,\n    } = props;\n\n    const currentUser = useCurrentUser();\n    const is_owner = currentUser?.username === owner\n\n    const handleLike = async () => {\n        try {\n            const { data } = await axiosRes.post(\"/likes/\", { post: id });\n            setPosts((prevPosts) => ({\n                ...prevPosts,\n                results: prevPosts.results.map((post) => {\n                    return post.id === id\n                    ? {...post, likes_count: post.likes_count + 1, like_id: data.id}\n                    : post;\n                }),\n            }));\n        } catch(err){\n            console.log(err);\n        }\n    };\n\n    return <Card className={styles.Post}>\n        <Card.Body>\n            <Row className=\"align-items-center jsutify-content-between\">\n                <Col xs={3}>\n                    <Link to={`/profiles/${profile_id}`}>\n                        <Avatar src={profile_image} height={55} />\n                        {owner}\n                    </Link>\n                </Col>\n                <Col xs={9}>\n                <div className='d-flex align-items-center'>\n                    <span>{updated_at}</span>\n                    {is_owner && postPage && \"...\"}\n                </div>\n                </Col>\n            </Row>\n        </Card.Body>\n        <Link to={`/posts/${id}`}>\n            <Card.Img src={image} alt={title} />\n        </Link>\n        <Card.Body>\n            {title && <Card.Title className='text-center'>{title}</Card.Title>}\n            {content && <Card.Text>{content}</Card.Text>}\n            <div className={styles.PostBar}>\n                {is_owner ? (\n                    <OverlayTrigger placement='top' overlay={<Tooltip>You can't like your own post!</Tooltip>}>\n                        <i className='far fa-heart' />\n                    </OverlayTrigger>\n                ) : like_id ? (\n                    <span onClick={()=>{}}>\n                        <i className={`fas fa-heart ${styles.Heart}`} />\n                    </span>\n                ) : currentUser ? (\n                    <span onClick={handleLike}>\n                        <i className={`far fa-heart ${styles.HeartOutline}`} />\n                    </span>\n                ) : (\n                    <OverlayTrigger placement='top' overlay={<Tooltip>Log in to like posts!</Tooltip>}>\n                        <i className='far fa-heart' />\n                    </OverlayTrigger>\n                )}\n                {likes_count}\n                <Link to={`/posts/${id}`}>\n                    <i className='far fa-comments' />\n                </Link>\n                {comments_count}\n            </div>\n        </Card.Body>\n    </Card>\n}\n\nexport default Post"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}